<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NFC Test</title>
</head>
<body>
<h1>Ù…Ø§Ø³Ø­ NFC Ù„Ù„Ø´Ø§Ø­Ù†Ø§Øª</h1>
<button id="scanBtn">Ù…Ø³Ø­ Ø¨Ø·Ø§Ù‚Ø© NFC</button>
<pre id="output">Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø³Ø­...</pre>

<script>
async function readNFC() {
    if (!("NDEFReader" in window)) {
        document.getElementById("output").innerText = "âŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… NFC";
        return;
    }

    try {
        const ndef = new NDEFReader();
        await ndef.scan();
        document.getElementById("output").innerText = "ğŸ‘€ Ø¶Ø¹ Ø¨Ø·Ø§Ù‚Ø© NFC Ø§Ù„Ø¢Ù†...";

        ndef.onreading = event => {
            const decoder = new TextDecoder("utf-8");
            let allText = "";
            for (const record of event.message.records) {
                allText += decoder.decode(record.data) + "\n";
            }

            document.getElementById("output").innerText =
                `UID: ${event.serialNumber || "N/A"}\n\n${allText}`;
        };

        ndef.onreadingerror = () => {
            document.getElementById("output").innerText = "âŒ ØªØ¹Ø°Ø± Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©";
        };

    } catch (err) {
        document.getElementById("output").innerText = "Ø®Ø·Ø£: " + err;
    }
}

document.getElementById("scanBtn").addEventListener("click", readNFC);
</script>

</body>
</html>
